/*C3*/SET SCHEMA PUBLIC
DROP TABLE PUBLIC.TRANSACTIONS
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DROP TABLE PUBLIC.TRANSACTIONS
/*C6*/SET SCHEMA PUBLIC
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
/*C5*/DROP TABLE PUBLIC.BALANCEHISTORY
DROP TABLE PUBLIC.TRANSACTIONS
DROP TABLE PUBLIC.BANKACCOUNT
DROP TABLE PUBLIC.CATEGORY
DROP TABLE PUBLIC."USER"
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a\u0009CONSTRAINT CATEGORY_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC."USER" (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a\u0009CONSTRAINT USER_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX SYS_IDX_USER_PK_10120 ON PUBLIC."USER" (ID)
CREATE TABLE PUBLIC.BANK_ACCOUNT (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
DROP TABLE PUBLIC.BANK_ACCOUNT
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
DROP TABLE PUBLIC.TRANSACTIONS
DROP TABLE PUBLIC.BANKACCOUNT
DROP TABLE PUBLIC.CATEGORY
DROP TABLE PUBLIC."USER"
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a\u0009CONSTRAINT CATEGORY_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC."USER" (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a\u0009CONSTRAINT USER_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX SYS_IDX_USER_PK_10120 ON PUBLIC."USER" (ID)
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."USER"(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
CREATE TABLE PUBLIC.BALANCE_HISTORY (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER NOT NULL,\u000a\u0009BALANCE DOUBLE NOT NULL,\u000a\u0009CONSTRAINT BALANCEHISTORY_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BALANCEHISTORY_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID)\u000a)
DROP TABLE IF EXISTS TRANSACTIONS
DROP TABLE IF EXISTS BALANCE_HISTORY
DROP TABLE IF EXISTS BANKACCOUNT
DROP TABLE IF EXISTS CATEGORY
DROP TABLE IF EXISTS "USER"
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a\u0009CONSTRAINT CATEGORY_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC.USERS (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a\u0009CONSTRAINT USER_PK PRIMARY KEY (ID)\u000a)
CREATE UNIQUE INDEX SYS_IDX_USERS_PK_10120 ON PUBLIC.USERS (ID)
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
CREATE TABLE PUBLIC.BALANCE_HISTORY (\u000a\u0009ID INTEGER IDENTITY NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER NOT NULL,\u000a\u0009BALANCE DOUBLE NOT NULL,\u000a\u0009CONSTRAINT BALANCE_HISTORY_PK PRIMARY KEY (ID),\u000a\u0009CONSTRAINT BALANCE_HISTORY_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID)\u000a)
CREATE UNIQUE INDEX BALANCE_HISTORY_BANKACCOUNT_ID_IDX ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID,DATE)
CREATE INDEX SYS_IDX_10138 ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID)
CREATE UNIQUE INDEX SYS_IDX_BALANCE_HISTORY_PK_10133 ON PUBLIC.BALANCE_HISTORY (ID)
DROP TABLE IF EXISTS TRANSACTIONS
DROP TABLE IF EXISTS BALANCE_HISTORY
DROP TABLE IF EXISTS BANKACCOUNT
DROP TABLE IF EXISTS CATEGORY
DROP TABLE IF EXISTS USERS
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC.USERS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a)
CREATE UNIQUE INDEX SYS_IDX_USERS_PK_10120 ON PUBLIC.USERS (ID)
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
CREATE TABLE PUBLIC.BALANCE_HISTORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER NOT NULL,\u000a\u0009BALANCE DOUBLE NOT NULL,\u000a\u0009CONSTRAINT BALANCE_HISTORY_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID)\u000a)
CREATE UNIQUE INDEX BALANCE_HISTORY_BANKACCOUNT_ID_IDX ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID,DATE)
CREATE INDEX SYS_IDX_10138 ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID)
CREATE UNIQUE INDEX SYS_IDX_BALANCE_HISTORY_PK_10133 ON PUBLIC.BALANCE_HISTORY (ID)
INSERT INTO USERS VALUES(0,'Kraft','Marcus')
COMMIT
INSERT INTO USERS VALUES(1,'M\u00fcller','Stephanie')
COMMIT
INSERT INTO USERS VALUES(2,'Mustermann','Max')
COMMIT
DROP TABLE IF EXISTS TRANSACTIONS
DROP TABLE IF EXISTS BALANCE_HISTORY
DROP TABLE IF EXISTS BANKACCOUNT
DROP TABLE IF EXISTS CATEGORY
DROP TABLE IF EXISTS USERS
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC.USERS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a)
CREATE UNIQUE INDEX SYS_IDX_USERS_PK_10120 ON PUBLIC.USERS (ID)
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP DEFAULT now NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
CREATE TABLE PUBLIC.BALANCE_HISTORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER NOT NULL,\u000a\u0009BALANCE DOUBLE NOT NULL,\u000a\u0009CONSTRAINT BALANCE_HISTORY_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID)\u000a)
CREATE UNIQUE INDEX BALANCE_HISTORY_BANKACCOUNT_ID_IDX ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID,DATE)
CREATE INDEX SYS_IDX_10138 ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID)
CREATE UNIQUE INDEX SYS_IDX_BALANCE_HISTORY_PK_10133 ON PUBLIC.BALANCE_HISTORY (ID)
INSERT INTO USERS VALUES(0,'Kraft','Marcus')
COMMIT
INSERT INTO USERS VALUES(1,'M\u00fcller','Stephanie')
COMMIT
INSERT INTO USERS VALUES(2,'Mustermann','Max')
COMMIT
INSERT INTO CATEGORY VALUES(0,'Miete')
COMMIT
INSERT INTO CATEGORY VALUES(1,'Nebenkosten')
COMMIT
INSERT INTO CATEGORY VALUES(2,'Lebensmittel')
COMMIT
INSERT INTO CATEGORY VALUES(3,'Sonstiges')
COMMIT
INSERT INTO BANKACCOUNT VALUES(0,'Giro','Stadtsparkasse Magdeburg','5478542579','DE15478214551485HWJ',0)
COMMIT
INSERT INTO USERS VALUES(3,'Kraft','Marcus')
COMMIT
INSERT INTO USERS VALUES(4,'M\u00fcller','Stephanie')
COMMIT
INSERT INTO USERS VALUES(5,'Mustermann','Max')
COMMIT
INSERT INTO BANKACCOUNT VALUES(1,'Giro','Stadtsparkasse Magdeburg','5478542579','DE15478214551485HWJ',0)
COMMIT
INSERT INTO TRANSACTIONS VALUES(0,'Butter',0,0,2,'2016-01-02','2016-10-20 22:55:11.733000')
COMMIT
DELETE FROM BANKACCOUNT WHERE ID=1
COMMIT
DELETE FROM USERS WHERE ID=3
COMMIT
DELETE FROM USERS WHERE ID=4
COMMIT
DELETE FROM USERS WHERE ID=5
COMMIT
DROP TABLE IF EXISTS TRANSACTIONS
DROP TABLE IF EXISTS BALANCE_HISTORY
DROP TABLE IF EXISTS BANKACCOUNT
DROP TABLE IF EXISTS CATEGORY
DROP TABLE IF EXISTS USERS
CREATE TABLE PUBLIC.CATEGORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(50) NOT NULL,\u000a)
CREATE UNIQUE INDEX CATEGORY_NAME_IDX ON PUBLIC.CATEGORY (NAME)
CREATE UNIQUE INDEX SYS_IDX_CATEGORY_PK_10126 ON PUBLIC.CATEGORY (ID)
CREATE TABLE PUBLIC.USERS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009SURNAME VARCHAR(100) NOT NULL,\u000a)
CREATE UNIQUE INDEX SYS_IDX_USERS_PK_10120 ON PUBLIC.USERS (ID)
CREATE TABLE PUBLIC.BANKACCOUNT (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKNAME VARCHAR(100) NOT NULL,\u000a\u0009IBAN VARCHAR(100) NOT NULL,\u000a\u0009BIC VARCHAR(100) NOT NULL,\u000a\u0009USER_ID INTEGER NOT NULL,\u000a\u0009CONSTRAINT BANKACCOUNT_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10141 ON PUBLIC.BANKACCOUNT (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_BANKACCOUNT_PK_10097 ON PUBLIC.BANKACCOUNT (ID)
CREATE TABLE PUBLIC.TRANSACTIONS (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009NAME VARCHAR(100) NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER,\u000a\u0009USER_ID INTEGER,\u000a\u0009CATEGORY_ID INTEGER NOT NULL,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009"TIMESTAMP" TIMESTAMP DEFAULT now NOT NULL,\u000a\u0009CONSTRAINT TRANSACTIONS_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_CATEGORY_FK FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID),\u000a\u0009CONSTRAINT TRANSACTIONS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC.USERS(ID)\u000a)
CREATE INDEX SYS_IDX_10249 ON PUBLIC.TRANSACTIONS (BANKACCOUNT_ID)
CREATE INDEX SYS_IDX_10251 ON PUBLIC.TRANSACTIONS (CATEGORY_ID)
CREATE INDEX SYS_IDX_10253 ON PUBLIC.TRANSACTIONS (USER_ID)
CREATE UNIQUE INDEX SYS_IDX_TRANSACTIONS_PK_10243 ON PUBLIC.TRANSACTIONS (ID)
CREATE TABLE PUBLIC.BALANCE_HISTORY (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009"DATE" DATE NOT NULL,\u000a\u0009BANKACCOUNT_ID INTEGER NOT NULL,\u000a\u0009BALANCE DOUBLE NOT NULL,\u000a\u0009CONSTRAINT BALANCE_HISTORY_BANKACCOUNT_FK FOREIGN KEY (BANKACCOUNT_ID) REFERENCES PUBLIC.BANKACCOUNT(ID)\u000a)
CREATE UNIQUE INDEX BALANCE_HISTORY_BANKACCOUNT_ID_IDX ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID,DATE)
CREATE INDEX SYS_IDX_10138 ON PUBLIC.BALANCE_HISTORY (BANKACCOUNT_ID)
CREATE UNIQUE INDEX SYS_IDX_BALANCE_HISTORY_PK_10133 ON PUBLIC.BALANCE_HISTORY (ID)
INSERT INTO USERS VALUES(0,'Kraft','Marcus')
COMMIT
INSERT INTO USERS VALUES(1,'M\u00fcller','Stephanie')
COMMIT
INSERT INTO USERS VALUES(2,'Mustermann','Max')
COMMIT
INSERT INTO CATEGORY VALUES(0,'Miete')
COMMIT
INSERT INTO CATEGORY VALUES(1,'Nebenkosten')
COMMIT
INSERT INTO CATEGORY VALUES(2,'Lebensmittel')
COMMIT
INSERT INTO CATEGORY VALUES(3,'Sonstiges')
COMMIT
INSERT INTO BANKACCOUNT VALUES(0,'Giro','Stadtsparkasse Magdeburg','5478542579','DE15478214551485HWJ',0)
COMMIT
INSERT INTO TRANSACTIONS VALUES(0,'Butter',0,0,2,'2016-01-02','2016-10-20 22:57:39.104000')
COMMIT
DISCONNECT
